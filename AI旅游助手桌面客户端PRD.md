# **AI旅游助手 桌面客户端**

# **项目需求文档 (PRD)**

| 版本 | 日期 | 作者    | 变更内容 |
| :---- | :---- |:------| :---- |
| V1.0 | 2025-11-14 | Bread | 初始草稿，包含全部19项功能及技术栈 |

## **1\. 项目概述**

### **1.1. 项目目标**

本项目旨在开发一款集成了先进人工智能的桌面客户端——“AI旅游助手”。该助手旨在彻底改变用户规划、体验和回顾旅行的方式。它将通过一个统一的、智能的界面，提供从灵感激发、个性化推荐、智能行程规划到旅途辅助和旅行回顾的全周期服务。

### **1.2. 核心价值**

* **个性化**: 利用 AI 学习用户偏好，提供千人千面的旅行推荐和规划。  
* **智能化**: 自动处理复杂的行程逻辑（地理位置、时间、交通），将用户从繁琐的规划中解放出来。  
* **一体化**: 打通规划、准备、体验、回顾的完整闭环，所有旅行相关信息沉淀在一个应用中。

### **1.3. 目标用户**

* **追求效率的旅行者**: 希望快速得到一个高质量、符合逻辑的行程，不愿花费大量时间搜集信息的用户。  
* **深度体验的规划者**: 喜欢详细规划，但需要一个强大工具来管理心愿单、预算和多方案对比的用户。  
* **多人/家庭出游组织者**: 需要协调多人偏好和时间的旅行组织者。  
* **AI 技术尝鲜者**: 对 AI 如何赋能日常生活充满好奇，愿意尝试新型智能工具的用户。

## **2\. 系统架构**

本系统采用**前后端分离**的客户端/服务器 (C/S) 架构。

* **前端 (桌面客户端)**: 负责UI展示、用户交互、本地数据缓存和离线功能。作为“瘦客户端”运行。  
* **后端 (云端 AI 大脑)**: 负责所有重度计算、业务逻辑处理、AI 推理、第三方数据调用和数据持久化。

## **3\. 功能需求 (Functional Requirements)**

功能清单被划分为五个主要模块。

### **3.1. 模块一：核心规划与管理 (Core Planning)**

| ID | 功能名称 | 优先级 | 详细描述 |
| :---- | :---- | :---- | :---- |
| F-3.1.1 | AI智能推荐 | **高** | AI根据用户输入的**目的地**、**时长**、**个人偏好**（如“美食”、“历史”、“亲子”、“慢节奏”）等，通过后端调用大语言模型(LLM)和知识库，推荐景点、餐厅、活动等。 |
| F-3.1.2 | 心愿单系统 | **高** | 用户可将任何推荐的（或手动的）地点收藏到“心愿单”。心愿单是AI进行智能规划的主要输入源之一。 |
| F-3.1.3 | 手动添加条目 | **中** | 允许用户手动输入并创建自定义的地点（如“朋友家”），并将其添加到心愿单或行程中。 |
| F-3.1.4 | AI智能行程规划 | **高** | **(核心功能)** AI根据用户的心愿单、各地点**地理位置(GIS)**、**营业时间**、预估游玩时间、交通耗时以及用户偏好，智能规划出每日的详细行程，确保逻辑合理、路线最优。 |
| F-3.1.5 | 出行建议与预警 | **高** | AI基于规划的行程，主动查询**天气**、**交通**信息，给出具体的出行建议（如“带伞”、“建议地铁出行以避开拥堵”）。 |
| F-3.1.6 | 历史行程管理 | **中** | 用户可以查看、归档、编辑或删除所有已完成的历史行程。 |
| F-3.1.7 | 行程专属AI对话 | **高** | 用户可选择任一已规划的行程，与AI进行**上下文感知**的对话。例如：“帮我把第三天的行程排得松一点”、“这个行程里哪个景点最适合拍照？”。 |

### **3.2. 模块二：增强的规划与准备 (P1: Enhanced Planning)**

| ID | 功能名称 | 优先级 | 详细描述 |
| :---- | :---- | :---- | :---- |
| F-3.2.1 | 预算管理与AI估算 | **中** | 用户可设定总预算。AI在推荐(\#3.1.1)和规划(\#3.1.4)时，自动估算门票、餐饮、交通等花费，并提供“经济”、“舒适”等不同价位选项。 |
| F-3.2.2 | 智能打包清单 | **中** | AI根据目的地、时长、天气(\#3.1.5)及规划的活动（如“徒步”），动态生成一份行李打包建议清单。用户可勾选或自定义。 |
| F-3.2.3 | 多交通模式整合 | **中** | 在规划(\#3.1.4)时，AI不仅排列景点，还明确规划景点间的**具体交通方式**（步行、公交、地铁、打车），并估算耗时。 |
| F-3.2.4 | 多人协作规划 | **低** | (V2功能) 支持创建“团队行程”，邀请朋友加入。所有人均可添加心愿单，AI在规划时会尝试平衡多方偏好。 |

### **3.3. 模块三：旅途中的辅助 (P2: In-Trip Experience)**

| ID | 功能名称 | 优先级 | 详细描述 |
| :---- | :---- | :---- | :---- |
| F-3.3.1 | 动态行程调整 | **中** | 当检测到突发情况（如天气突变、景点关闭），AI能（基于\#3.1.5）立即提出备选方案（B-Plan）。 |
| F-3.3.2 | 情境化AI导游 | **中** | 在查看行程时，用户可激活AI（基于\#3.1.7），深入了解当前景点的历史、趣闻、看点。 |
| F-3.3.3 | 离线模式与信息导出 | **高** | 客户端应能缓存已规划的行程。提供“一键导出PDF”功能，将完整行程（含地图、地址、时间）保存到本地，便于离线查看。 |
| F-3.3.4 | 实时开销记录 | **低** | (V2功能) 在预算(\#3.2.1)基础上，用户可快速录入实际花费，与预算对比。 |

### **3.4. 模块四：旅程后的回顾与分享 (P3: Post-Trip)**

| ID | 功能名称 | 优先级 | 详细描述 |
| :---- | :---- | :---- | :---- |
| F-3.4.1 | AI辅助旅行日志 | **中** | 在历史行程(\#3.1.6)基础上，用户可将照片、笔记拖拽到对应的行程节点。AI可辅助生成图文并茂的“旅行故事线”。 |
| F-3.4.2 | 行程评分与偏好学习 | **高** | 旅行结束后，AI邀请用户为行程中的地点打分。这些评分将作为**RAG**的重要数据源，用于**反向优化**该用户的未来AI推荐(\#3.1.1)模型。 |
| F-3.4.3 | 行程模板与分享 | **低** | 用户可将满意的历史行程(\#3.1.6)保存为“模板”，以便未来复用或分享。 |

### **3.5. 模块五：探索与灵感 (Exploration)**

| ID | 功能名称 | 优先级 | 详细描述 |
| :---- | :---- | :---- | :---- |
| F-3.5.1 | 灵感激发模式 | **中** | 当用户无明确目标时，可输入**模糊需求**（如“5天假、预算3000、想看海”），AI将推荐符合条件的“目的地”。 |
| F-3.5.2 | 探索朋友模式 | **中** | 用户可以探索兴趣相似的朋友。 |

## **4\. 非功能需求 (Non-Functional Requirements)**

| 类别 | 需求描述 |
| :---- | :---- |
| **性能** | 桌面应用启动时间应小于 5 秒。AI 智能规划（\#3.1.4）等异步任务应在 30 秒内返回结果，并提供明确的加载状态。 |
| **可用性** | 界面简洁、直观。核心规划流程应能在 5 分钟内完成。提供清晰的错误提示和操作指引。 |
| **安全性** | 用户数据（偏好、行程、历史）在传输和存储时必须加密。与第三方 API 的通信必须使用 HTTPS。 |
| **可靠性** | 后端服务应保证 99.9% 的可用性。前端应用应有健壮的错误处理机制，避免闪退。 |
| **可扩展性** | 后端 AI 编排应采用模块化设计，便于未来更换 LLM 模型或增减第三方 API。 |
| **离线能力** | 即使在断网状态下，用户也必须能够访问已缓存或导出的行程（\#3.3.3）。 |

## **5\. 技术栈选型**

### **5.1. 前端技术栈 (桌面客户端)**

| 技术 | 选型 | 目的 |
| :---- | :---- | :---- |
| 应用框架 | **Electron** (或 Tauri) | 将 Web 应用打包成跨平台（Win/Mac/Linux）桌面程序。 |
| UI 库 | **React** | 构建组件化的、响应式的用户界面。 |
| UI 组件库 | **MUI** (或 Ant Design) | 提供高质量的预制组件，统一风格，加速开发。 |
| 状态管理 | **Redux Toolkit (RTK)** | 管理复杂的全局应用状态（用户信息、行程数据流）。 |
| 本地数据库 | **SQLite** | 实现数据缓存和离线模式（\#3.3.3）。 |
| 地图组件 | React-Leaflet / 高德地图JS API | 渲染交互式地图，展示 POI 和路线。 |
| 网络请求 | Axios | 与后端 API 进行 HTTP 通信。 |

### **5.2. 后端技术栈 (云端 AI 大脑)**

| **类别**           | **技术**                                                     | **目的与说明**                                               |
| ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **核心框架**       | **Spring Boot**                                              | **(核心)** 整个后端的基石。提供了 Web 服务、依赖注入、配置管理等一切所需功能。 |
| **Web & API**      | **Spring MVC**                                               | (Spring Boot 内置) 用于构建 RESTful API。`@RestController`, `@GetMapping`, `@PostMapping` 将是你的主要工具。 |
| **AI 编排框架**    | **Spring AI** (推荐) 或 **LangChain4j**                      | **(AI 核心)**  1. **Spring AI**: Spring 官方项目，旨在将 AI 概念（如 `ChatClient`, `EmbeddingClient`）无缝集成到 Spring 应用中。与 Spring Boot 结合最紧密。 2. **LangChain4j**: LangChain 的 Java 版本，如果你熟悉 Python 的 LangChain，这个概念上最接近。 |
| **AI 模型调用**    | (由 Spring AI / LangChain4j 管理)                            | 它们会封装对 OpenAI、Anthropic (Claude) 或其他模型 API 的 HTTP 调用。 |
| **数据库 (RDBMS)** | **PostgreSQL**                                               | (不变) 存储所有结构化业务数据（用户、行程、心愿单）。        |
| **数据访问 (ORM)** | **Spring Data JPA** + **Hibernate**                          | **(核心)** Java 中操作数据库的**事实标准**。通过定义 Repository 接口，即可实现对 PostgreSQL 的增删改查。 |
| **向量数据库**     | **PGVector** (PostgreSQL 插件)                               | (不变) 存储 Embeddings。 **Spring AI** 对 PGVector 提供了开箱即用的 `VectorStore` 集成支持。 |
| **异步任务**       | 1. **Spring `@Async`** (简单) 2. **RabbitMQ / Kafka** (复杂/分布式) | **(替代 Celery)** 1. `@Async`: 对于中等耗时的任务（如 10 秒的 AI 规划），一个简单的注解即可让其在**后台线程池**中运行，不阻塞 API。 2. `RabbitMQ`: 如果你需要一个像 Celery 那样强大的**分布式任务队列**（可横向扩展 Worker），Spring AMQP (配合 RabbitMQ) 是完美对标。 |
| **缓存/消息**      | **Redis** + **Spring Data Redis**                            | (不变) Redis 在 Java 生态中同样重要。Spring Data Redis 提供了便捷的 API 来操作缓存，也可作为 RabbitMQ 的替代品用于消息传递。 |
| **构建/依赖**      | **Maven** 或 **Gradle**                                      | Java 项目管理工具，用于管理所有依赖（如 Spring Boot, Spring AI, PGVector 驱动等）。 |
| **安全 (可选)**    | **Spring Security**                                          | 如果你未来要添加用户登录和鉴权，这是 Java/Spring 中的标准解决方案。 |

### **5.3. 第三方服务 API**

| 服务 | 目的 |
| :---- | :---- |
| **地图 & POI** | **高德地图 API** (国内) 或 **Google Maps API** (国际) |
| **天气** | **和风天气** (国内) 或 **OpenWeatherMap** (国际) |

